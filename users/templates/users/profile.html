{% extends 'base.html' %}

{% block main %}

<div class="row">
  <div class="col-md-8 col-md-offset-2">
    <p>
    Hello, {{ profile.fb_name }}.
    {% if profile.preferred_candidate and profile.state %}
    You're a {{ profile.preferred_candidate }} voter in {{ profile.state }}.
    {% else %}
    We're missing some information from you, please
    <a href="{% url "users:update_profile" %}">Update your profile</a>.
    {% endif %}
  </div>
</div>
<div class="row">
  {% for fm_ctx in profile_context.good_potential_matches %}
  <div class="col-md-4 swap-option js-swap-option {% if fm_ctx.has_been_proposed_to %}proposed{% endif %}">
    <h3>{{ fm_ctx.name }}{% if not fm_ctx.friend_match.is_direct %} (via {{ fm_ctx.friend_match.through.user.get_full_name }}){% endif %}</h3>
    <div class="proposed-content">
      You have proposed to this friend.
    </div>
    <div class="not-proposed-content">
      <p>{{ fm_ctx.proposal_string }}</p>
      <button type="button" class="btn btn-primary js-propose-swap" data-profile-id="{{fm_ctx.friend_match.profile.id}}" data-name="{{ fm_ctx.name }}">Swap with {{ fm_ctx.name }}</button>
    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}
