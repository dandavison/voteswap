{% extends 'base.html' %}

{% block main %}

<div class="row">
  <div class="col-md-8 col-md-offset-2">
    <p>
    Hello, {{ profile.fb_name }}.
    {% if profile.preferred_candidate and profile.state %}
    You're a {{ profile.preferred_candidate }} voter in {{ profile.state }}.
    {% else %}
    We're missing some information from you, please
    <a href="{% url "users:update_profile" %}">Update your profile</a>.
    {% endif %}
  </div>
</div>

<!--
{% for fm_ctx in profile_context.good_potential_matches %}
<div class="col-sm-4 swap-option js-swap-option {% if fm_ctx.has_been_proposed_to %}proposed{% endif %}">
    <div class="clearfix">
      <div class="pull-left">
        <img src="https://graph.facebook.com/v2.7/{{ profile.fb_id }}/picture?type=normal" />
      </div>
      <div class="pull-left">
        <h2>{{ fm_ctx.name }}{% if not fm_ctx.friend_match.is_direct %} (via {{ fm_ctx.friend_match.through.user.get_full_name }}){% endif %}</h2>
      </div>
    </div>
    <div class="proposed-content">
      You have proposed to this friend.
    </div>
    <div class="not-proposed-content">
      <p>{{ fm_ctx.proposal_string }}</p>
      <button type="button" class="btn btn-primary js-propose-swap" data-profile-id="{{fm_ctx.friend_match.profile.id}}" data-name="{{ fm_ctx.name }}">Swap with {{ fm_ctx.name }}</button>
    </div>
  </div>
</div>
{% endfor %}
-->




{% for fm_ctx in profile_context.good_potential_matches %}
<!-- Adapted from http://bootsnipp.com/snippets/featured/user-profile-sidebar -->
<div class="col-xs-12 col-sm-6 col-md-4">
  <div class="match-box">
    <!-- SIDEBAR USERPIC -->
    <div class="match-userpic">
      <img src="https://graph.facebook.com/v2.7/{{ profile.fb_id }}/picture?type=large" 
           class="img-responsive"
           alt="{{ fm_ctx.name }}'s image"/>
    </div>
    <!-- END SIDEBAR USERPIC -->
    <!-- SIDEBAR USER TITLE -->
    <div class="match-usertitle">
      <div class="match-usertitle-name">
        {{ fm_ctx.name }}
      </div>
      <div class="match-usertitle-job">
        {% if not fm_ctx.friend_match.is_direct %} (via {{ fm_ctx.friend_match.through.user.get_full_name }}){% endif %}
        <!--<div class="proposed-content">
          You have proposed to this friend.
        </div>
        <div class="not-proposed-content">
          <p>{{ fm_ctx.proposal_string }}</p>
          <button type="button" class="btn btn-primary js-propose-swap" data-profile-id="{{fm_ctx.friend_match.profile.id}}" data-name="{{ fm_ctx.name }}">Swap with {{ fm_ctx.name }}</button>
          </div>-->
      </div>
    </div>
    <!-- END SIDEBAR USER TITLE -->
    <!-- SIDEBAR BUTTONS -->
    <div class="match-userbuttons">
      <button type="button" class="btn btn-success btn-sm">Swap</button>
      <button type="button" class="btn btn-info btn-sm">Message</button>
    </div>
    <!-- END SIDEBAR BUTTONS -->
    <!-- SIDEBAR MENU -->
    <div class="match-usermenu">
      <ul class="nav">
        <li class="active">
          <a href="#">
            <i class="glyphicon glyphicon-home"></i>
            Overview </a>
        </li>
        <li>
          <a href="https://facebook.com/{{ fm_ctx.friend_match.profile.fb_id }}">
            <i class="glyphicon glyphicon-user"></i>
            View Facebook Profile </a>
        </li>
        <li>
          <a href="#" target="_blank">
            <i class="glyphicon glyphicon-ok"></i>
            Tasks </a>
        </li>
        <li>
          <a href="#">
            <i class="glyphicon glyphicon-flag"></i>
            Help </a>
        </li>
      </ul>
    </div>
    <!-- END MENU -->
  </div>
</div>
{% endfor %}
{% endblock %}
